Since we don’t want neither the servers nor the monitoring process to hang in case of busy processes, we will make use of asynchronous request only.
We will use .z.ts (timer function to run the ‘ping call’ every 30 seconds), .z.W (dictionary of handles opened), .z.w (handle of the process that is sending a remote message) and .z.ps (message handler for asynchronous messages). The monitor process should just open the connections to the servers (using the hopen command) and then load the following attached function (monitor.q). The information on the response time of the servers is updated every 30 seconds and is contained in .monitor.table.
If the endTime and the responseTime fields are empty for a certain server, it means that that process is busy and has not yet ‘replied’ to the ‘ping call’.